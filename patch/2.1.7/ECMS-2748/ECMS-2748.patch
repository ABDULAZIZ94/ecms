Index: packaging/ecmdemo/webapp/src/main/webapp/WEB-INF/conf/sample-portal/wcm/artifacts/site-resources/acme/Navigation.xml
===================================================================
--- packaging/ecmdemo/webapp/src/main/webapp/WEB-INF/conf/sample-portal/wcm/artifacts/site-resources/acme/Navigation.xml	(revision 73912)
+++ packaging/ecmdemo/webapp/src/main/webapp/WEB-INF/conf/sample-portal/wcm/artifacts/site-resources/acme/Navigation.xml	(working copy)
@@ -1 +1 @@
-<?xml version="1.0" encoding="UTF-8"?><Navigation xmlns:nt="http://www.jcp.org/jcr/nt/1.0" xmlns:tkn="http://www.gatein.org/jcr/token/1.0/" xmlns:webdav="http://www.exoplatform.org/jcr/webdav" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:gtn="http://www.gatein.org/jcr/gatein/1.0/" xmlns:rh="www.vn.vnn" xmlns:jcr="http://www.jcp.org/jcr/1.0" xmlns:wsrp="http://www.gatein.org/jcr/wsrp/1.0/" xmlns:sv="http://www.jcp.org/jcr/sv/1.0" xmlns:jos="http://nl.ijs.si/jos/" xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:metadata="http://www.exoplatform.com/jcr/metadata/1.1/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:app="http://www.gatein.org/jcr/application-registry/1.0/" xmlns:Re="http://www.exoplatform.com/jcr/Re/1.1/" xmlns:lgn="http://www.gatein.org/jcr/autologin/1.0/" xmlns:mop="http://www.gatein.org/jcr/mop/1.0/" xmlns:fn_old="http://www.w3.org/2004/10/xpath-functions" xmlns:mix="http://www.jcp.org/jcr/mix/1.0" xmlns:publication="http://www.exoplatform.com/jcr/publication/1.1/" xmlns:exo="http://www.exoplatform.com/jcr/exo/1.0" xmlns:Fwd="http://www.exoplatform.com/jcr/Fwd/1.1/" xmlns:pc="http://www.gatein.org/jcr/pc/1.0/" xmlns:rma="http://www.rma.com/jcr/" xmlns:kfx="http://www.exoplatform.com/jcr/kfx/1.1/" xmlns:portlet="http://www.gatein.org/jcr/portlet/1.0/" xmlns:rep="internal" jcr:primaryType="exo:webContent" jcr:mixinTypes="exo:owneable exo:datetime exo:linkable mix:votable mix:commentable exo:modify mix:lockable" jcr:uuid="38feb7467f000001005583765fa59bda" exo:dateCreated="2009-08-21T01:08:20.339+07:00" exo:dateModified="2010-11-16T19:09:16.623+07:00" exo:lastModifiedDate="2010-11-16T19:10:15.245+07:00" exo:lastModifier="__system" exo:links="" exo:owner="root" exo:summary="" exo:title="ACME_x0020_Navigation" exo:voteTotal="0" exo:voteTotalOfLang="0" exo:votingRate="0.0" jcr:created="2009-08-21T01:08:20.313+07:00"><js jcr:primaryType="exo:jsFolder" jcr:mixinTypes="exo:owneable exo:datetime mix:votable mix:commentable" exo:dateCreated="2009-08-21T01:08:20.410+07:00" exo:dateModified="2009-08-21T01:08:20.417+07:00" exo:owner="root" exo:voteTotal="0" exo:voteTotalOfLang="0" exo:votingRate="0.0" jcr:created="2009-08-21T01:08:20.378+07:00"><default.js jcr:primaryType="nt:file" jcr:mixinTypes="exo:owneable exo:jsFile exo:datetime mix:votable mix:commentable exo:modify" jcr:uuid="38feb7d17f00000100b381629949657a" exo:active="true" exo:dateCreated="2009-08-21T01:08:20.534+07:00" exo:dateModified="2009-11-26T13:52:42.281+07:00" exo:lastModifiedDate="2010-11-16T19:09:16.622+07:00" exo:lastModifier="john" exo:owner="root" exo:presentationType="exo:jsFile" exo:priority="0" exo:voteTotal="0" exo:voteTotalOfLang="0" exo:votingRate="0.0" jcr:created="2009-08-21T01:08:20.445+07:00"><jcr:content jcr:primaryType="nt:resource" jcr:mixinTypes="exo:owneable exo:datetime mix:votable mix:commentable exo:jsFile dc:elementSet" jcr:uuid="38feb84d7f0000010063d9cde17eb4fd" exo:active="false" exo:dateCreated="2009-08-21T01:08:20.598+07:00" exo:dateModified="2009-08-21T01:08:20.605+07:00" exo:internalUse="false" exo:owner="root" exo:priority="0" exo:voteTotal="0" exo:voteTotalOfLang="0" exo:votingRate="0.0" jcr:data="ZVhvLnJlcXVpcmUoImVYby53Y20uYmFja29mZmljZS5wcml2YXRlLldDTVV0aWxzIiwgIi9lWG9XQ01SZXNvdXJjZXMvamF2YXNjcmlwdC8iKTsKZVhvLnJlcXVpcmUoImVYby53Y20uZnJvbnRvZmZpY2UucHVibGljLkJyZWFkY3J1bWIiLCAiL2VYb1dDTVJlc291cmNlcy9qYXZhc2NyaXB0LyIpOwp2YXIgc3RyID0gJyc7CnZhciBmdHJhdmVyc2UgPSBmYWxzZTsKZnVuY3Rpb24gcmVuZGVyTmF2aWdhdGlvbnMoKSAKewogIHRyeQogIHsKCSAgdmFyIG5hdmlnYXRpb25zID0gZVhvLmVudi5wb3J0YWwubmF2aWdhdGlvbnM7ICAgICAgICAKICAgIHZhciB0ZW1wTmF2ID0gbmF2aWdhdGlvbnM7CgkgIG5hdmlnYXRpb25zID0gbmF2aWdhdGlvbnNbMF07CgkgIHZhciBodG1sID0gCSc8ZGl2IGNsYXNzPSJVSVdDTU5hdmlnYXRpb25Qb3J0bGV0Ij48ZGl2IGNsYXNzPSJVSU5hdmlnYXRpb25CYXIiPic7ICAgCgoJICB2YXIgZGF0ZSA9IChuZXcgRGF0ZSgpKS5nZXRUaW1lKCk7ICAKCSAgZm9yIChpIGluIG5hdmlnYXRpb25zLm5vZGVzKQoJICB7CgkgICAgdmFyIG5hdmlnYXRpb24gPSBuYXZpZ2F0aW9ucy5ub2Rlc1tpXTsKICAgICAgaWYobmF2aWdhdGlvbi5yZXNvbHZlZExhYmVsKQoJICAgIHsKCSAgICAgIHZhciB0aXRsZSA9IG5hdmlnYXRpb24ucmVzb2x2ZWRMYWJlbDsgICAgICAgICAgICAgIAoJICAgICAgaWYgKHRpdGxlLmxlbmd0aCA+IDMwKQoJICAgICAgICB0aXRsZSA9IHRpdGxlLnN1YnN0cmluZygwLDI5KSArICIuLi4iOwoKCSAgICAgIHZhciB0YWJTdHlsZU5hdmlnYXRpb24gPSAnQ29udHJvbEJ1dHRvbic7CgkgICAgICB2YXIgY3VycmVudE5vZGVzID0gZVhvLmVjbS5XQ01CcmVhZGNydW1iUG9ydGxldC5nZXRDdXJyZW50Tm9kZXModGVtcE5hdiwgZVhvLmVudi5wb3J0YWwuc2VsZWN0ZWROb2RlVXJpKTsgIAoJCQkJaWYgKGN1cnJlbnROb2Rlcy5sZW5ndGg+MCAmJiBuYXZpZ2F0aW9uLnVyaSA9PSBjdXJyZW50Tm9kZXNbY3VycmVudE5vZGVzLmxlbmd0aCAtIDFdLnVyaSkJCgkgICAgICAgIHRhYlN0eWxlTmF2aWdhdGlvbiA9ICdDb250cm9sQnV0dG9uIEhvdmVyQnV0dG9uJzsgICAgCgkgICAgICB2YXIgbGluayA9IGVYby5lY20uV0NNVXRpbHMuZ2V0SG9zdE5hbWUoKSArIGVYby5lbnYucG9ydGFsLmNvbnRleHQgKyAnLycgKyBlWG8uZW52LnBvcnRhbC5hY2Nlc3NNb2RlICsgJy8nICsgZVhvLmVudi5wb3J0YWwucG9ydGFsTmFtZSArICcvJyArICAgICAgbmF2aWdhdGlvbi51cmk7CgkgICAgICB2YXIgYXJyb3dJY29uID0gJyc7CgkgICAgICBodG1sICs9ICAnPGRpdiBjbGFzcz0iJyt0YWJTdHlsZU5hdmlnYXRpb24rJyI+JysnPGRpdiBjbGFzcz0iQnV0dG9uIiBvbm1vdXNlb3Zlcj0ic2hvd1BvcHVwTWVudSh0aGlzKSI+JzsKCSAgICAgIGlmIChuYXZpZ2F0aW9uLnVyaSkKCSAgICAgICAgaHRtbCArPSAgICAnPGEgaHJlZj0iJyArIGxpbmsgKyAnIj4nICsgdGl0bGUgKyAnPC9hPic7CgkgICAgICBlbHNlIAoJICAgICAgICBodG1sICs9ICAgICc8YSBjbGFzcz0iVGFiTGFiZWwgJyArIG5hdmlnYXRpb24uaWNvbiArICciPicgKyB0aXRsZSArICc8L2E+JzsKCSAgICAgIGh0bWwgKz0gICAgJzwvZGl2Pic7CgkgICAgICBzdHIgPSAnJzsJCiAgICAgICAgICAgICAgZnRyYXZlcnNlID0gZmFsc2U7CQogICAgICAgICAgICAgIGh0bWwgKz0gdHJhdmVyc2UobmF2aWdhdGlvbik7CiAgICAgICAgICAgICAgaHRtbCArPSAnPC9kaXY+JzsKICAgICAgICAgICAgfQoJICB9CgkgIGh0bWwgKz0gJzxkaXYgc3R5bGU9ImNsZWFyOiBsZWZ0OyI+PHNwYW4+PC9zcGFuPjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2Pic7CgkgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduYXZpZ2F0aW9uLWdlbmVyYXRvcicpLmlubmVySFRNTCA9IGh0bWw7CiAgfQogIGNhdGNoKGVycikKICB7ICAgIAogIH0KfQoKZnVuY3Rpb24gdHJhdmVyc2UobykgCiB7ICAgCgkJdHJ5CgkJewoJCSAgaWYoby5ub2Rlcy5sZW5ndGg+MCkgc3RyICs9ICc8ZGl2IGNsYXNzPSJFQ01NZW51SXRlbUNvbnRhaW5lciIgc3R5bGU9ImRpc3BsYXk6IG5vbmU7IG1pbi13aWR0aDogODlweDsgcG9zaXRpb246IGFic29sdXRlOyB0b3A6IDMwcHg7IGxlZnQ6IDJweDsiPic7CgkJICBmb3IgKGkgaW4gby5ub2RlcykgICAKCQkgIHsgICAgICAKCQkgICAgaWYoby5ub2Rlc1tpXS5yZXNvbHZlZExhYmVsKQoJCSAgICB7ICAgICAKCQkgICAgICBmdHJhdmVyc2UgPSB0cnVlOyAKCQkgICAgICB2YXIgc3VidGl0bGUgPSBvLm5vZGVzW2ldLnJlc29sdmVkTGFiZWw7ICAgICAgICAgICAgICAKCQkJICAgIGlmIChzdWJ0aXRsZS5sZW5ndGggPiAzMCkKCQkJICAgICAgc3VidGl0bGUgPSBzdWJ0aXRsZS5zdWJzdHJpbmcoMCwyOSkgKyAiLi4uIjsgICAgICAgICAgCgkJICAgICAgdmFyIGxpbmsgPSBlWG8uZWNtLldDTVV0aWxzLmdldEhvc3ROYW1lKCkgKyBlWG8uZW52LnBvcnRhbC5jb250ZXh0ICsgJy8nICsgZVhvLmVudi5wb3J0YWwuYWNjZXNzTW9kZSArICcvJyArIGVYby5lbnYucG9ydGFsLnBvcnRhbE5hbWUgKyAnLycgKyAgICAgIG8ubm9kZXNbaV0udXJpOwoJCSAgICAgIGlmICh0eXBlb2Yoby5ub2Rlc1tpXS5ub2Rlcyk9PSJvYmplY3QiICYmIG8ubm9kZXNbaV0ubm9kZXMubGVuZ3RoPjApCgkJICAgICAgCXN0ciArPSAnPGRpdiBjbGFzcz0iTWVudUl0ZW0iPjxkaXYgY2xhc3M9IkFycm93SWNvbiI+PGEgaHJlZj0iJytsaW5rKyciIHN0eWxlPSJ0ZXh0LWRlY29yYXRpb246bm9uZTtjb2xvcjp3aGl0ZSIgY2xhc3M9Ikl0ZW1JY29uIERlZmF1bHRQYWdlSWNvbiIgb25tb3VzZW92ZXI9InNob3dQb3B1cFN1Yk1lbnUodGhpcyk7Ij4nK3N1YnRpdGxlKyc8L2E+PC9kaXY+JzsgCgkJZWxzZQoJCQlzdHIgKz0gJzxkaXYgY2xhc3M9Ik1lbnVJdGVtIj48ZGl2PjxhIGhyZWY9IicrbGluaysnIiBzdHlsZT0idGV4dC1kZWNvcmF0aW9uOm5vbmU7Y29sb3I6d2hpdGUiIGNsYXNzPSJJdGVtSWNvbiBEZWZhdWx0UGFnZUljb24iPicrc3VidGl0bGUrJzwvYT48L2Rpdj4nOwoJCSAgICAgIGlmICh0eXBlb2Yoby5ub2Rlc1tpXS5ub2Rlcyk9PSJvYmplY3QiKSAKCQkJCQl7ICAgICAgICAgICAgICAKCQkgICAgICAgICB0cmF2ZXJzZShvLm5vZGVzW2ldKTsKCQkJCQl9CgkJICAgICAgc3RyKz0nPC9kaXY+JyAgICAgICAgCgkJICAgIH0gICAgICAKCQkgIH0gICAgICAgIAoJCSAgaWYoby5ub2Rlcy5sZW5ndGg+MCkgc3RyICs9ICc8L2Rpdj4nOwoJCSAgCgkJICByZXR1cm4gc3RyOwoJCX0KCQljYXRjaChlcnIpCgkJewkJCQoJCX0KIH0gCgpmdW5jdGlvbiBzaG93UG9wdXBNZW51KG9iaikgeyAgICAgICAgCglpZighb2JqKSByZXR1cm47CiAgICAgICAgdmFyIHVpTmF2aSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdVSVByZXNlbnRhdGlvbkNvbnRhaW5lcicpOwkKCXZhciB1aUFDTUVOYXZpID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25hdmlnYXRpb24tZ2VuZXJhdG9yJyk7CiAJdmFyIHVpV0NNTmF2aWdhdGlvblBvcnRsZXQgPSBlWG8uY29yZS5ET01VdGlsLmZpbmRGaXJzdERlc2NlbmRhbnRCeUNsYXNzKHVpQUNNRU5hdmksICJkaXYiLCAiVUlXQ01OYXZpZ2F0aW9uUG9ydGxldCIpOwogICAgICAgIGlmKG9iai5UaW1lb3V0KSBjbGVhclRpbWVvdXQob2JqLlRpbWVvdXQpOwogIAl2YXIgRE9NVXRpbCA9IGVYby5jb3JlLkRPTVV0aWw7CiAgICAgICAgICAgICAgIAoJCgl2YXIgbW51SXRlbUNvbnRhaW5lciA9IERPTVV0aWwuZmluZE5leHRFbGVtZW50QnlUYWdOYW1lKG9iaiwgImRpdiIpOyAgICAKCXZhciBvYmpQYXJlbnQgPSBET01VdGlsLmZpbmRBbmNlc3RvckJ5Q2xhc3Mob2JqLCAiQ29udHJvbEJ1dHRvbiIpOwoJaWYobW51SXRlbUNvbnRhaW5lciAmJiBtbnVJdGVtQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgIT0gImJsb2NrIikgCgl7CiAgICBvYmpQYXJlbnQuc3R5bGUucG9zaXRpb249InJlbGF0aXZlIjsgICAgICAgICAKCSAgbW51SXRlbUNvbnRhaW5lci5zdHlsZS50b3AgPSAgb2JqLm9mZnNldEhlaWdodCArICdweCc7CgkgIG1udUl0ZW1Db250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7ICAgICAgICAgIAoJICBtbnVJdGVtQ29udGFpbmVyLm9ubW91c2VvdXQgPSBmdW5jdGlvbigpeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAoJCSBpZihlWG8uY29yZS5Ccm93c2VyLmJyb3dzZXJUeXBlID09ICdpZScpICB7CgkJIGlmKHVpTmF2aSkgdWlOYXZpLnN0eWxlLnBvc2l0aW9uID0gInJlbGF0aXZlIjsKCQkgaWYodWlXQ01OYXZpZ2F0aW9uUG9ydGxldCkgdWlXQ01OYXZpZ2F0aW9uUG9ydGxldC5zdHlsZS5wb3NpdGlvbiA9ICJyZWxhdGl2ZSI7CgkJfQoJCW9iai5UaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJbW51SXRlbUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwkJCQoJCQltbnVJdGVtQ29udGFpbmVyLm9ubW91c2VvdmVyID0gbnVsbDsKCQkJbW51SXRlbUNvbnRhaW5lci5vbm1vdXNlb3V0ID0gbnVsbDsKCQl9LDEqMTApOwoJICB9CgkgIG1udUl0ZW1Db250YWluZXIub25tb3VzZW92ZXIgPSBmdW5jdGlvbigpIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCQkKCQkJaWYoZVhvLmNvcmUuQnJvd3Nlci5icm93c2VyVHlwZSA9PSAnaWUnKSAgewoJCQkJaWYodWlOYXZpKSB1aU5hdmkuc3R5bGUucG9zaXRpb24gPSAic3RhdGljIjsKCQkJCWlmKHVpV0NNTmF2aWdhdGlvblBvcnRsZXQpIHVpV0NNTmF2aWdhdGlvblBvcnRsZXQuc3R5bGUucG9zaXRpb24gPSAic3RhdGljIjsKCQkJfQoJCQlpZihvYmouVGltZW91dCkgY2xlYXJUaW1lb3V0KG9iai5UaW1lb3V0KTsKCQkJb2JqLlRpbWVvdXQgPSBudWxsOwoJCX0KCQlvYmoub25tb3VzZW91dCA9IG1udUl0ZW1Db250YWluZXIub25tb3VzZW91dDsKCX0KCQkKfQkJCgpmdW5jdGlvbiBzaG93UG9wdXBTdWJNZW51KG9iaikgeyAKCWlmKCFvYmopIHJldHVybjsKCWlmKG9iai5UaW1lb3V0KSBjbGVhclRpbWVvdXQob2JqLlRpbWVvdXQpOwkKCXZhciBET01VdGlsID0gZVhvLmNvcmUuRE9NVXRpbDsKCXZhciBvYmpQYXJlbnQgPSBvYmo7Cgl2YXIgc3ViTWVudUl0ZW1Db250YWluZXIgPSBmYWxzZTsgICAKICB2YXIgb2JqUGFyZW50ID0gRE9NVXRpbC5maW5kQW5jZXN0b3JCeUNsYXNzKG9iaiwgIkFycm93SWNvbiIpOwogIGlmKG9ialBhcmVudCkgc3ViTWVudUl0ZW1Db250YWluZXIgPSBET01VdGlsLmZpbmROZXh0RWxlbWVudEJ5VGFnTmFtZShvYmpQYXJlbnQsICJkaXYiKTsgIAoJaWYoc3ViTWVudUl0ZW1Db250YWluZXIgJiYgc3ViTWVudUl0ZW1Db250YWluZXIuc3R5bGUuZGlzcGxheSAhPSAiYmxvY2siKSB7ICAgICAgCgkJc3ViTWVudUl0ZW1Db250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CgkJb2JqUGFyZW50LmNsYXNzTmFtZSA9ICcnOyAgIAoJCXN1Yk1lbnVJdGVtQ29udGFpbmVyLm9ubW91c2VvdmVyID0gZnVuY3Rpb24oKSB7CQoJCSAgb2JqUGFyZW50LmNsYXNzTmFtZSA9ICcnOwkKCQkJaWYob2JqUGFyZW50LlRpbWVvdXQpIGNsZWFyVGltZW91dChvYmpQYXJlbnQuVGltZW91dCk7CgkJCW9ialBhcmVudC5UaW1lb3V0ID0gIG51bGw7ICAgICAgCgkJfQoKCQlzdWJNZW51SXRlbUNvbnRhaW5lci5vbm1vdXNlb3V0ID0gZnVuY3Rpb24oKSAgIAoJCXsgICAgICAKCQkJb2JqUGFyZW50LlRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyAgICAgICAgICAgICAgICAKCQkJCSAKICAgICAgICB2YXIgc3Vib2JqID0gRE9NVXRpbC5maW5kRmlyc3REZXNjZW5kYW50QnlDbGFzcyhzdWJNZW51SXRlbUNvbnRhaW5lciwgImRpdiIsICJFQ01NZW51SXRlbUNvbnRhaW5lciIpOwoJCQkJaWYoc3Vib2JqKQogICAgICAgIHsJCQkJCQkJCQkJCQoJCQkJCQlpZihzdWJvYmouc3R5bGUuZGlzcGxheT09J2Jsb2NrJykKCQkJCQkJewkKCiAgIAkJCQkJCXN1Ym9iai5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyAJCQkJCQkJCQkKCQkJCQkJCXN1Ym9iai5vbm1vdXNlb3ZlciA9IG51bGw7CgkJCQkJCQlzdWJvYmoub25tb3VzZW91dCA9IG51bGw7CQkJCQkJCSAKCQkJCQkJfQoJCQkJCQllbHNlCgkJCQkJCXsKCgkJCQkJCQlzdWJNZW51SXRlbUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyAKCQkJCQkJCW9ialBhcmVudC5jbGFzc05hbWUgPSAnQXJyb3dJY29uJzsJCQkJCgkJCQkJCQlzdWJNZW51SXRlbUNvbnRhaW5lci5vbm1vdXNlb3ZlciA9IG51bGw7CgkJCQkJCQlzdWJNZW51SXRlbUNvbnRhaW5lci5vbm1vdXNlb3V0ID0gbnVsbDsKCQkJCQkJfQoJCQkJfQoJCQkJZWxzZQoJCQkJewkJCgkJCQkJCQoJCQkJCXN1Yk1lbnVJdGVtQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IAkJCQkJCgkJCQkJb2JqUGFyZW50LmNsYXNzTmFtZSA9ICdBcnJvd0ljb24nOwkJCQkKCQkJCQlzdWJNZW51SXRlbUNvbnRhaW5lci5vbm1vdXNlb3ZlciA9IG51bGw7CgkJCQkJc3ViTWVudUl0ZW1Db250YWluZXIub25tb3VzZW91dCA9IG51bGw7CgkJCQl9CgkJCX0sIDEqMTApOyAgICAgCgkJfQkKCQlvYmoub25tb3VzZW91dCA9IHN1Yk1lbnVJdGVtQ29udGFpbmVyLm9ubW91c2VvdXQ7CQkKCQlzdWJNZW51SXRlbUNvbnRhaW5lci5zdHlsZS5sZWZ0ID0gb2JqUGFyZW50Lm9mZnNldExlZnQgKyBvYmpQYXJlbnQub2Zmc2V0V2lkdGggKyAncHgnOwoJCXN1Yk1lbnVJdGVtQ29udGFpbmVyLnN0eWxlLnRvcCA9ICBlWG8uY29yZS5Ccm93c2VyLmZpbmRQb3NZSW5Db250YWluZXIob2JqUGFyZW50LHN1Yk1lbnVJdGVtQ29udGFpbmVyLm9mZnNldFBhcmVudCkgKyAncHgnOwoJfQp9" jcr:encoding="UTF-8" jcr:lastModified="2010-11-16T19:09:16.620+07:00" jcr:mimeType="application/x-javascript"/></default.js></js><css jcr:primaryType="exo:cssFolder" jcr:mixinTypes="exo:owneable exo:datetime mix:votable mix:commentable" exo:dateCreated="2009-08-21T01:08:20.707+07:00" exo:dateModified="2009-08-21T01:08:20.714+07:00" exo:owner="root" exo:voteTotal="0" exo:voteTotalOfLang="0" exo:votingRate="0.0" jcr:created="2009-08-21T01:08:20.676+07:00"><default.css jcr:primaryType="nt:file" jcr:mixinTypes="exo:owneable exo:cssFile exo:datetime mix:votable mix:commentable exo:modify" jcr:uuid="38feb8f77f0000010074c5cdbcf40338" exo:active="true" exo:dateCreated="2009-08-21T01:08:20.822+07:00" exo:dateModified="2009-08-21T01:08:20.831+07:00" exo:lastModifiedDate="2010-11-16T19:09:16.597+07:00" exo:lastModifier="john" exo:owner="root" exo:presentationType="exo:cssFile" exo:priority="0" exo:voteTotal="0" exo:voteTotalOfLang="0" exo:votingRate="0.0" jcr:created="2009-08-21T01:08:20.736+07:00"><jcr:content jcr:primaryType="nt:resource" jcr:mixinTypes="exo:owneable exo:datetime mix:votable mix:commentable dc:elementSet" jcr:uuid="38feb96c7f0000010088e0fe71341223" exo:dateCreated="2009-08-21T01:08:20.884+07:00" exo:dateModified="2009-08-21T01:08:20.891+07:00" exo:internalUse="false" exo:owner="root" exo:voteTotal="0" exo:voteTotalOfLang="0" exo:votingRate="0.0" jcr:data="LkVDTU1lbnVJdGVtQ29udGFpbmVyIHsgICAgCiAgei1pbmRleDoxOyAKfQouRUNNTWVudUl0ZW1Db250YWluZXIgLk1lbnVJdGVtIHsKCWJhY2tncm91bmQ6bm9uZSByZXBlYXQgc2Nyb2xsIDAgMCAjM0U0NDVEOwoJYm9yZGVyLXRvcDoxcHggc29saWQgIzU1NUE2RTsKCWhlaWdodDoyOHB4OwoJbGluZS1oZWlnaHQ6MjhweDsKCW9wYWNpdHk6MC45OwoJd2lkdGg6MTAwJTsKfQouRUNNTWVudUl0ZW1Db250YWluZXIgLlNlbGVjdGVkSXRlbSB7CgliYWNrZ3JvdW5kLWNvbG9yOiNBNEE0QTQ7CgliYWNrZ3JvdW5kOm5vbmUgcmVwZWF0IHNjcm9sbCAwIDAgI0E0QTRBNDsKCWJvcmRlci10b3A6MXB4IHNvbGlkICM1NTVBNkU7CgloZWlnaHQ6MjhweDsKCWxpbmUtaGVpZ2h0OjI4cHg7CglvcGFjaXR5OjAuOTsKCXdpZHRoOjEwMCU7Cn0KLkVDTU1lbnVJdGVtQ29udGFpbmVyIC5NZW51SXRlbSAuQXJyb3dJY29uIHsKCWJhY2tncm91bmQ6dXJsKCIvZVhvV0NNUmVzb3VyY2VzL3NraW4vRGVmYXVsdFNraW4vYmFja2dyb3VuZC9BcnJvd0ljb24uZ2lmIikgbm8tcmVwZWF0IHNjcm9sbCByaWdodCBjZW50ZXIgdHJhbnNwYXJlbnQ7Cn0KLkVDTU1lbnVJdGVtQ29udGFpbmVyIC5NZW51SXRlbSAuSXRlbUljb24gewoJYmFja2dyb3VuZC1wb3NpdGlvbjo2cHggY2VudGVyOwoJY3Vyc29yOnBvaW50ZXI7CglkaXNwbGF5OmJsb2NrOwoJbGluZS1oZWlnaHQ6MTZweDsKCXBhZGRpbmc6NXB4IDMycHggMHB4IDBweDsKCXdoaXRlLXNwYWNlOm5vd3JhcDsKCXdpZHRoOmF1dG87Cn0KLkVDTU1lbnVJdGVtQ29udGFpbmVyIC5NZW51SXRlbSAuRGVmYXVsdFBhZ2VJY29uIHsKCWJhY2tncm91bmQ6dXJsKCIvZVhvV0NNUmVzb3VyY2VzL3NraW4vRGVmYXVsdFNraW4vYmFja2dyb3VuZC9Ub29sYmFyQ29udGFpbmVyLnBuZyIpIG5vLXJlcGVhdCBzY3JvbGwgNXB4IC02MzRweCB0cmFuc3BhcmVudDsKCXBhZGRpbmctbGVmdDozMnB4OwoJaGVpZ2h0OjI0cHg7Cn0KLlVJV0NNTmF2aWdhdGlvblBvcnRsZXQgLlVJTmF2aWdhdGlvbkJhciAuQnV0dG9uIHsKY3Vyc29yOnBvaW50ZXI7CmhlaWdodDoyMXB4OwptYXJnaW4tbGVmdDo2cHg7Cm1hcmdpbi1yaWdodDo2cHg7Cn0=" jcr:encoding="UTF-8" jcr:lastModified="2010-11-16T19:09:16.594+07:00" jcr:mimeType="text/css"/></default.css></css><medias jcr:primaryType="exo:multimediaFolder" jcr:mixinTypes="exo:owneable exo:datetime mix:votable mix:commentable" exo:dateCreated="2009-08-21T01:08:20.985+07:00" exo:dateModified="2009-08-21T01:08:20.993+07:00" exo:owner="root" exo:voteTotal="0" exo:voteTotalOfLang="0" exo:votingRate="0.0"><images jcr:primaryType="nt:folder" jcr:mixinTypes="exo:owneable exo:datetime mix:votable mix:commentable" exo:dateCreated="2009-08-21T01:08:21.051+07:00" exo:dateModified="2009-08-21T01:08:21.063+07:00" exo:owner="root" exo:voteTotal="0" exo:voteTotalOfLang="0" exo:votingRate="0.0" jcr:created="2009-08-21T01:08:21.018+07:00"><illustration jcr:primaryType="nt:file" jcr:mixinTypes="exo:owneable exo:datetime mix:referenceable mix:votable mix:commentable exo:modify" jcr:uuid="38feba557f000001004b470c5028be2d" exo:dateCreated="2009-08-21T01:08:21.141+07:00" exo:dateModified="2009-08-21T01:08:21.148+07:00" exo:lastModifiedDate="2010-11-16T19:09:16.616+07:00" exo:lastModifier="john" exo:owner="root" exo:voteTotal="0" exo:voteTotalOfLang="0" exo:votingRate="0.0" jcr:created="2009-08-21T01:08:21.085+07:00"><jcr:content jcr:primaryType="nt:resource" jcr:mixinTypes="exo:owneable exo:datetime mix:votable mix:commentable dc:elementSet" jcr:uuid="38febab07f00000100ec3e186cf11472" exo:dateCreated="2009-08-21T01:08:21.209+07:00" exo:dateModified="2009-08-21T01:08:21.216+07:00" exo:internalUse="false" exo:owner="root" exo:voteTotal="0" exo:voteTotalOfLang="0" exo:votingRate="0.0" jcr:data="" jcr:encoding="UTF-8" jcr:lastModified="2010-11-16T19:09:16.613+07:00" jcr:mimeType=""/></illustration><CenterHilineButton.gif jcr:primaryType="nt:file" jcr:mixinTypes="exo:datetime exo:owneable mix:i18n mix:votable mix:commentable mix:referenceable" jcr:uuid="391f212f7f00000100bb1815e7dd229a" exo:dateCreated="2009-08-21T01:43:44.623+07:00" exo:dateModified="2009-08-21T01:43:44.632+07:00" exo:language="en" exo:owner="root" exo:voteTotal="0" exo:voteTotalOfLang="0" exo:votingRate="0.0" jcr:created="2009-08-21T01:43:44.566+07:00"><jcr:content jcr:primaryType="nt:resource" jcr:mixinTypes="exo:datetime exo:owneable dc:elementSet" jcr:uuid="391f21b27f0000010035beaa577f5f28" exo:dateCreated="2009-08-21T01:43:44.724+07:00" exo:dateModified="2009-08-21T01:43:44.732+07:00" exo:internalUse="false" exo:owner="root" jcr:data="R0lGODlhCgAaAJEAAAAAAP///////wAAACH5BAEAAAIALAAAAAAKABoAAAIWjI+py+0Po5y02oubEGvv5HlHGAZkAQA7" jcr:encoding="UTF-8" jcr:lastModified="2009-08-21T01:43:44.559+07:00" jcr:mimeType="image/gif"/></CenterHilineButton.gif><WhiteDownArrow.gif jcr:primaryType="nt:file" jcr:mixinTypes="exo:owneable exo:datetime" exo:dateCreated="2009-08-26T15:32:24.077+07:00" exo:dateModified="2009-08-26T15:32:24.082+07:00" exo:owner="root" jcr:created="2009-08-26T15:32:24.019+07:00"><jcr:content jcr:primaryType="nt:resource" jcr:mixinTypes="exo:owneable exo:datetime dc:elementSet" jcr:uuid="55d596187f00010100136a82e0fe16d6" exo:dateCreated="2009-08-26T15:32:24.120+07:00" exo:dateModified="2009-08-26T15:32:24.127+07:00" exo:internalUse="false" exo:owner="root" jcr:data="R0lGODlhEAAQAMQAAChvm0+kySlwnFWr0Fet0S11oEiZwDuHsUWWvVOpzlKnzECOtzWAqjB4o0qexP///+Hh4gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAABAALAAAAAAQABAAAAUfICSOZGmeaKquLPm8cPyYcozWcyqzcAvlvqBwSDSFAAA7" jcr:lastModified="2009-08-26T15:32:24.162+07:00" jcr:mimeType="image/gif"/></WhiteDownArrow.gif></images><videos jcr:primaryType="nt:folder" jcr:mixinTypes="exo:owneable exo:datetime mix:votable mix:commentable" exo:dateCreated="2009-08-21T01:08:21.310+07:00" exo:dateModified="2009-08-21T01:08:21.317+07:00" exo:owner="root" exo:voteTotal="0" exo:voteTotalOfLang="0" exo:votingRate="0.0" jcr:created="2009-08-21T01:08:21.279+07:00"/></medias><default.html jcr:primaryType="nt:file" jcr:mixinTypes="exo:owneable exo:datetime exo:htmlFile mix:votable mix:commentable exo:modify" jcr:uuid="38febb5e7f000001002c7f9329bcb8d5" exo:dateCreated="2009-08-21T01:08:21.402+07:00" exo:dateModified="2009-08-21T01:08:21.410+07:00" exo:lastModifiedDate="2010-11-16T19:09:16.592+07:00" exo:lastModifier="john" exo:owner="root" exo:voteTotal="0" exo:voteTotalOfLang="0" exo:votingRate="0.0" jcr:created="2009-08-21T01:08:21.350+07:00"><jcr:content jcr:primaryType="nt:resource" jcr:mixinTypes="exo:owneable exo:datetime mix:votable mix:commentable dc:elementSet" jcr:uuid="38febbc17f00000100b89aba6316987a" exo:dateCreated="2009-08-21T01:08:21.482+07:00" exo:dateModified="2009-08-21T01:08:21.489+07:00" exo:internalUse="false" exo:owner="root" exo:voteTotal="0" exo:voteTotalOfLang="0" exo:votingRate="0.0" jcr:data="PGRpdiBpZD0ibmF2aWdhdGlvbi1nZW5lcmF0b3IiPgoJPGRpdiBjbGFzcz0iVUlXQ01OYXZpZ2F0aW9uUG9ydGxldCI+CgkJPGRpdiBjbGFzcz0iVUlOYXZpZ2F0aW9uQmFyIj4KCQkJPGRpdiBjbGFzcz0iQ29udHJvbEJ1dHRvbiBIb3ZlckJ1dHRvbiIgaHJlZj0iYWFhIj4KCQkJCTxkaXYgY2xhc3M9IkJ1dHRvbiI+CgkJCQkJT3ZlcnZpZXc8L2Rpdj4KCQkJPC9kaXY+CgkJCTxkaXYgY2xhc3M9IkNvbnRyb2xCdXR0b24iIGhyZWY9ImFhYSI+CgkJCQk8ZGl2IGNsYXNzPSJCdXR0b24iPgoJCQkJCU5ld3M8L2Rpdj4KCQkJPC9kaXY+CgkJCTxkaXYgY2xhc3M9IkNvbnRyb2xCdXR0b24iIGhyZWY9ImFhYSI+CgkJCQk8ZGl2IGNsYXNzPSJCdXR0b24iPgoJCQkJCUV2ZW50czwvZGl2PgoJCQk8L2Rpdj4KCQkJPGRpdiBjbGFzcz0iQ29udHJvbEJ1dHRvbiIgaHJlZj0iYWFhIj4KCQkJCTxkaXYgY2xhc3M9IkJ1dHRvbiI+CgkJCQkJUHVibGljYXRpb25zPC9kaXY+CgkJCTwvZGl2PgoJCQk8ZGl2IHN0eWxlPSJjbGVhcjogbGVmdDsiPgoJCQkJJm5ic3A7PC9kaXY+CgkJPC9kaXY+Cgk8L2Rpdj4KPC9kaXY+CjxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij4vKiA8IVtDREFUQVsgKi8gcmVuZGVyTmF2aWdhdGlvbnMoKTsgLyogXV0+ICovPC9zY3JpcHQ+" jcr:encoding="UTF-8" jcr:lastModified="2010-11-16T19:09:16.589+07:00" jcr:mimeType="text/html"/></default.html><documents jcr:primaryType="nt:unstructured" jcr:mixinTypes="exo:owneable exo:datetime exo:documentFolder mix:votable mix:commentable" exo:dateCreated="2009-08-21T01:08:21.611+07:00" exo:dateModified="2009-08-21T01:08:21.617+07:00" exo:owner="root" exo:voteTotal="0" exo:voteTotalOfLang="0" exo:votingRate="0.0"/></Navigation>
\ No newline at end of file
+<?xml version="1.0" encoding="UTF-8"?><Navigation xmlns:nt="http://www.jcp.org/jcr/nt/1.0" xmlns:tkn="http://www.gatein.org/jcr/token/1.0/" xmlns:webdav="http://www.exoplatform.org/jcr/webdav" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:gtn="http://www.gatein.org/jcr/gatein/1.0/" xmlns:rh="www.vn.vnn" xmlns:jcr="http://www.jcp.org/jcr/1.0" xmlns:wsrp="http://www.gatein.org/jcr/wsrp/1.0/" xmlns:sv="http://www.jcp.org/jcr/sv/1.0" xmlns:jos="http://nl.ijs.si/jos/" xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:metadata="http://www.exoplatform.com/jcr/metadata/1.1/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:app="http://www.gatein.org/jcr/application-registry/1.0/" xmlns:Re="http://www.exoplatform.com/jcr/Re/1.1/" xmlns:lgn="http://www.gatein.org/jcr/autologin/1.0/" xmlns:mop="http://www.gatein.org/jcr/mop/1.0/" xmlns:fn_old="http://www.w3.org/2004/10/xpath-functions" xmlns:mix="http://www.jcp.org/jcr/mix/1.0" xmlns:publication="http://www.exoplatform.com/jcr/publication/1.1/" xmlns:exo="http://www.exoplatform.com/jcr/exo/1.0" xmlns:Fwd="http://www.exoplatform.com/jcr/Fwd/1.1/" xmlns:pc="http://www.gatein.org/jcr/pc/1.0/" xmlns:rma="http://www.rma.com/jcr/" xmlns:kfx="http://www.exoplatform.com/jcr/kfx/1.1/" xmlns:portlet="http://www.gatein.org/jcr/portlet/1.0/" xmlns:rep="internal" jcr:primaryType="exo:webContent" jcr:mixinTypes="exo:owneable exo:datetime exo:linkable mix:votable mix:commentable exo:modify mix:i18n exo:sortable" jcr:uuid="38feb7467f000001005583765fa59bda" exo:dateCreated="2009-08-21T01:08:20.339+07:00" exo:dateModified="2011-09-23T16:30:23.071+07:00" exo:index="1000" exo:language="en" exo:lastModifiedDate="2011-09-23T16:30:23.071+07:00" exo:lastModifier="john" exo:links="" exo:owner="root" exo:summary="" exo:title="ACME_x0020_Navigation" exo:voteTotal="0" exo:voteTotalOfLang="0" exo:votingRate="0.0" jcr:created="2009-08-21T01:08:20.313+07:00" ><js jcr:primaryType="exo:jsFolder" jcr:mixinTypes="exo:owneable exo:datetime mix:votable mix:commentable mix:i18n" exo:dateCreated="2009-08-21T01:08:20.410+07:00" exo:dateModified="2009-08-21T01:08:20.417+07:00" exo:language="en" exo:owner="root" exo:voteTotal="0" exo:voteTotalOfLang="0" exo:votingRate="0.0" jcr:created="2009-08-21T01:08:20.378+07:00"><default.js jcr:primaryType="nt:file" jcr:mixinTypes="exo:owneable exo:jsFile exo:datetime mix:votable mix:commentable exo:modify mix:i18n" jcr:uuid="38feb7d17f00000100b381629949657a" exo:active="true" exo:dateCreated="2009-08-21T01:08:20.534+07:00" exo:dateModified="2009-11-26T13:52:42.281+07:00" exo:language="en" exo:lastModifiedDate="2011-09-23T16:30:22.942+07:00" exo:lastModifier="john" exo:owner="root" exo:presentationType="exo:jsFile" exo:priority="0" exo:voteTotal="0" exo:voteTotalOfLang="0" exo:votingRate="0.0" jcr:created="2009-08-21T01:08:20.445+07:00"><jcr:content jcr:primaryType="nt:resource" jcr:mixinTypes="exo:owneable exo:datetime mix:votable mix:commentable exo:jsFile dc:elementSet mix:i18n" jcr:uuid="38feb84d7f0000010063d9cde17eb4fd" exo:active="false" exo:dateCreated="2009-08-21T01:08:20.598+07:00" exo:dateModified="2009-08-21T01:08:20.605+07:00" exo:internalUse="false" exo:language="en" exo:owner="root" exo:priority="0" exo:voteTotal="0" exo:voteTotalOfLang="0" exo:votingRate="0.0" jcr:data="ZVhvLnJlcXVpcmUoImVYby53Y20uYmFja29mZmljZS5wcml2YXRlLldDTVV0aWxzIiwgIi9lWG9XQ01SZXNvdXJjZXMvamF2YXNjcmlwdC8iKTsKZVhvLnJlcXVpcmUoImVYby53Y20uZnJvbnRvZmZpY2UucHVibGljLkJyZWFkY3J1bWIiLCAiL2VYb1dDTVJlc291cmNlcy9qYXZhc2NyaXB0LyIpOwp2YXIgc3RyID0gJyc7CnZhciBmdHJhdmVyc2UgPSBmYWxzZTsKZnVuY3Rpb24gcmVuZGVyTmF2aWdhdGlvbnMoKSAKewogIHRyeQogIHsKCSAgdmFyIG5hdmlnYXRpb25zID0gZVhvLmVudi5wb3J0YWwubmF2aWdhdGlvbnM7ICAgICAgICAKICAgIHZhciB0ZW1wTmF2ID0gbmF2aWdhdGlvbnM7CgkgIG5hdmlnYXRpb25zID0gbmF2aWdhdGlvbnNbMF07CgkgIHZhciBodG1sID0gCSc8ZGl2IGNsYXNzPSJVSVdDTU5hdmlnYXRpb25Qb3J0bGV0Ij48ZGl2IGNsYXNzPSJVSU5hdmlnYXRpb25CYXIiPic7ICAgCgoJICB2YXIgZGF0ZSA9IChuZXcgRGF0ZSgpKS5nZXRUaW1lKCk7ICAKCSAgZm9yIChpIGluIG5hdmlnYXRpb25zLm5vZGVzKQoJICB7CgkgICAgdmFyIG5hdmlnYXRpb24gPSBuYXZpZ2F0aW9ucy5ub2Rlc1tpXTsKICAgICAgaWYobmF2aWdhdGlvbi5yZXNvbHZlZExhYmVsKQoJICAgIHsKCSAgICAgIHZhciB0aXRsZSA9IG5hdmlnYXRpb24ucmVzb2x2ZWRMYWJlbDsgICAgICAgICAgICAgIAoJICAgICAgaWYgKHRpdGxlLmxlbmd0aCA+IDMwKQoJICAgICAgICB0aXRsZSA9IHRpdGxlLnN1YnN0cmluZygwLDI5KSArICIuLi4iOwoKCSAgICAgIHZhciB0YWJTdHlsZU5hdmlnYXRpb24gPSAnQ29udHJvbEJ1dHRvbic7CgkgICAgICB2YXIgY3VycmVudE5vZGVzID0gZVhvLmVjbS5XQ01CcmVhZGNydW1iUG9ydGxldC5nZXRDdXJyZW50Tm9kZXModGVtcE5hdiwgZVhvLmVudi5wb3J0YWwuc2VsZWN0ZWROb2RlVXJpKTsgIAoJCQkJaWYgKGN1cnJlbnROb2Rlcy5sZW5ndGg+MCAmJiBuYXZpZ2F0aW9uLnVyaSA9PSBjdXJyZW50Tm9kZXNbY3VycmVudE5vZGVzLmxlbmd0aCAtIDFdLnVyaSkJCgkgICAgICAgIHRhYlN0eWxlTmF2aWdhdGlvbiA9ICdDb250cm9sQnV0dG9uIEhvdmVyQnV0dG9uJzsgICAgCgkgICAgICB2YXIgbGluayA9IG5hdmlnYXRpb24ubGluazsKCSAgICAgIHZhciBhcnJvd0ljb24gPSAnJzsKCSAgICAgIGh0bWwgKz0gICc8ZGl2IGNsYXNzPSInK3RhYlN0eWxlTmF2aWdhdGlvbisnIj4nKyc8ZGl2IGNsYXNzPSJCdXR0b24iIG9ubW91c2VvdmVyPSJzaG93UG9wdXBNZW51KHRoaXMpIj4nOwoJICAgICAgaWYgKG5hdmlnYXRpb24udXJpKQoJICAgICAgICBodG1sICs9ICAgICc8YSBocmVmPSInICsgbGluayArICciPicgKyB0aXRsZSArICc8L2E+JzsKCSAgICAgIGVsc2UgCgkgICAgICAgIGh0bWwgKz0gICAgJzxhIGNsYXNzPSJUYWJMYWJlbCAnICsgbmF2aWdhdGlvbi5pY29uICsgJyI+JyArIHRpdGxlICsgJzwvYT4nOwoJICAgICAgaHRtbCArPSAgICAnPC9kaXY+JzsKCSAgICAgIHN0ciA9ICcnOwkKICAgICAgICAgICAgICBmdHJhdmVyc2UgPSBmYWxzZTsJCiAgICAgICAgICAgICAgaHRtbCArPSB0cmF2ZXJzZShuYXZpZ2F0aW9uKTsKICAgICAgICAgICAgICBodG1sICs9ICc8L2Rpdj4nOwogICAgICAgICAgICB9CgkgIH0KCSAgaHRtbCArPSAnPGRpdiBzdHlsZT0iY2xlYXI6IGxlZnQ7Ij48c3Bhbj48L3NwYW4+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+JzsKCSAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25hdmlnYXRpb24tZ2VuZXJhdG9yJykuaW5uZXJIVE1MID0gaHRtbDsKICB9CiAgY2F0Y2goZXJyKQogIHsgICAgCiAgfQp9CgpmdW5jdGlvbiB0cmF2ZXJzZShvKSAKIHsgICAKCQl0cnkKCQl7CgkJICBpZihvLm5vZGVzLmxlbmd0aD4wKSBzdHIgKz0gJzxkaXYgY2xhc3M9IkVDTU1lbnVJdGVtQ29udGFpbmVyIiBzdHlsZT0iZGlzcGxheTogbm9uZTsgbWluLXdpZHRoOiA4OXB4OyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMzBweDsgbGVmdDogMnB4OyI+JzsKCQkgIGZvciAoaSBpbiBvLm5vZGVzKSAgIAoJCSAgeyAgICAgIAoJCSAgICBpZihvLm5vZGVzW2ldLnJlc29sdmVkTGFiZWwpCgkJICAgIHsgICAgIAoJCSAgICAgIGZ0cmF2ZXJzZSA9IHRydWU7IAoJCSAgICAgIHZhciBzdWJ0aXRsZSA9IG8ubm9kZXNbaV0ucmVzb2x2ZWRMYWJlbDsgICAgICAgICAgICAgIAoJCQkgICAgaWYgKHN1YnRpdGxlLmxlbmd0aCA+IDMwKQoJCQkgICAgICBzdWJ0aXRsZSA9IHN1YnRpdGxlLnN1YnN0cmluZygwLDI5KSArICIuLi4iOyAgICAgICAgICAKCQkgICAgICB2YXIgbGluayA9IG8ubm9kZXNbaV0ubGluazsKCQkgICAgICBpZiAodHlwZW9mKG8ubm9kZXNbaV0ubm9kZXMpPT0ib2JqZWN0IiAmJiBvLm5vZGVzW2ldLm5vZGVzLmxlbmd0aD4wKQoJCSAgICAgIAlzdHIgKz0gJzxkaXYgY2xhc3M9Ik1lbnVJdGVtIj48ZGl2IGNsYXNzPSJBcnJvd0ljb24iPjxhIGhyZWY9IicrbGluaysnIiBzdHlsZT0idGV4dC1kZWNvcmF0aW9uOm5vbmU7Y29sb3I6d2hpdGUiIGNsYXNzPSJJdGVtSWNvbiBEZWZhdWx0UGFnZUljb24iIG9ubW91c2VvdmVyPSJzaG93UG9wdXBTdWJNZW51KHRoaXMpOyI+JytzdWJ0aXRsZSsnPC9hPjwvZGl2Pic7IAoJCWVsc2UKCQkJc3RyICs9ICc8ZGl2IGNsYXNzPSJNZW51SXRlbSI+PGRpdj48YSBocmVmPSInK2xpbmsrJyIgc3R5bGU9InRleHQtZGVjb3JhdGlvbjpub25lO2NvbG9yOndoaXRlIiBjbGFzcz0iSXRlbUljb24gRGVmYXVsdFBhZ2VJY29uIj4nK3N1YnRpdGxlKyc8L2E+PC9kaXY+JzsKCQkgICAgICBpZiAodHlwZW9mKG8ubm9kZXNbaV0ubm9kZXMpPT0ib2JqZWN0IikgCgkJCQkJeyAgICAgICAgICAgICAgCgkJICAgICAgICAgdHJhdmVyc2Uoby5ub2Rlc1tpXSk7CgkJCQkJfQoJCSAgICAgIHN0cis9JzwvZGl2PicgICAgICAgIAoJCSAgICB9ICAgICAgCgkJICB9ICAgICAgICAKCQkgIGlmKG8ubm9kZXMubGVuZ3RoPjApIHN0ciArPSAnPC9kaXY+JzsKCQkgIAoJCSAgcmV0dXJuIHN0cjsKCQl9CgkJY2F0Y2goZXJyKQoJCXsJCQkKCQl9CiB9IAoKZnVuY3Rpb24gc2hvd1BvcHVwTWVudShvYmopIHsgICAgICAgIAoJaWYoIW9iaikgcmV0dXJuOwogICAgICAgIHZhciB1aU5hdmkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnVUlQcmVzZW50YXRpb25Db250YWluZXInKTsJCgl2YXIgdWlBQ01FTmF2aSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduYXZpZ2F0aW9uLWdlbmVyYXRvcicpOwogCXZhciB1aVdDTU5hdmlnYXRpb25Qb3J0bGV0ID0gZVhvLmNvcmUuRE9NVXRpbC5maW5kRmlyc3REZXNjZW5kYW50QnlDbGFzcyh1aUFDTUVOYXZpLCAiZGl2IiwgIlVJV0NNTmF2aWdhdGlvblBvcnRsZXQiKTsKICAgICAgICBpZihvYmouVGltZW91dCkgY2xlYXJUaW1lb3V0KG9iai5UaW1lb3V0KTsKICAJdmFyIERPTVV0aWwgPSBlWG8uY29yZS5ET01VdGlsOwogICAgICAgICAgICAgICAKCQoJdmFyIG1udUl0ZW1Db250YWluZXIgPSBET01VdGlsLmZpbmROZXh0RWxlbWVudEJ5VGFnTmFtZShvYmosICJkaXYiKTsgICAgCgl2YXIgb2JqUGFyZW50ID0gRE9NVXRpbC5maW5kQW5jZXN0b3JCeUNsYXNzKG9iaiwgIkNvbnRyb2xCdXR0b24iKTsKCWlmKG1udUl0ZW1Db250YWluZXIgJiYgbW51SXRlbUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ICE9ICJibG9jayIpIAoJewogICAgb2JqUGFyZW50LnN0eWxlLnBvc2l0aW9uPSJyZWxhdGl2ZSI7ICAgICAgICAgCgkgIG1udUl0ZW1Db250YWluZXIuc3R5bGUudG9wID0gIG9iai5vZmZzZXRIZWlnaHQgKyAncHgnOwoJICBtbnVJdGVtQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOyAgICAgICAgICAKCSAgbW51SXRlbUNvbnRhaW5lci5vbm1vdXNlb3V0ID0gZnVuY3Rpb24oKXsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKCQkgaWYoZVhvLmNvcmUuQnJvd3Nlci5icm93c2VyVHlwZSA9PSAnaWUnKSAgewoJCSBpZih1aU5hdmkpIHVpTmF2aS5zdHlsZS5wb3NpdGlvbiA9ICJyZWxhdGl2ZSI7CgkJIGlmKHVpV0NNTmF2aWdhdGlvblBvcnRsZXQpIHVpV0NNTmF2aWdhdGlvblBvcnRsZXQuc3R5bGUucG9zaXRpb24gPSAicmVsYXRpdmUiOwoJCX0KCQlvYmouVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CgkJCW1udUl0ZW1Db250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJzsJCQkKCQkJbW51SXRlbUNvbnRhaW5lci5vbm1vdXNlb3ZlciA9IG51bGw7CgkJCW1udUl0ZW1Db250YWluZXIub25tb3VzZW91dCA9IG51bGw7CgkJfSwxKjEwKTsKCSAgfQoJICBtbnVJdGVtQ29udGFpbmVyLm9ubW91c2VvdmVyID0gZnVuY3Rpb24oKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAkJCgkJCWlmKGVYby5jb3JlLkJyb3dzZXIuYnJvd3NlclR5cGUgPT0gJ2llJykgIHsKCQkJCWlmKHVpTmF2aSkgdWlOYXZpLnN0eWxlLnBvc2l0aW9uID0gInN0YXRpYyI7CgkJCQlpZih1aVdDTU5hdmlnYXRpb25Qb3J0bGV0KSB1aVdDTU5hdmlnYXRpb25Qb3J0bGV0LnN0eWxlLnBvc2l0aW9uID0gInN0YXRpYyI7CgkJCX0KCQkJaWYob2JqLlRpbWVvdXQpIGNsZWFyVGltZW91dChvYmouVGltZW91dCk7CgkJCW9iai5UaW1lb3V0ID0gbnVsbDsKCQl9CgkJb2JqLm9ubW91c2VvdXQgPSBtbnVJdGVtQ29udGFpbmVyLm9ubW91c2VvdXQ7Cgl9CgkJCn0JCQoKZnVuY3Rpb24gc2hvd1BvcHVwU3ViTWVudShvYmopIHsgCglpZighb2JqKSByZXR1cm47CglpZihvYmouVGltZW91dCkgY2xlYXJUaW1lb3V0KG9iai5UaW1lb3V0KTsJCgl2YXIgRE9NVXRpbCA9IGVYby5jb3JlLkRPTVV0aWw7Cgl2YXIgb2JqUGFyZW50ID0gb2JqOwoJdmFyIHN1Yk1lbnVJdGVtQ29udGFpbmVyID0gZmFsc2U7ICAgCiAgdmFyIG9ialBhcmVudCA9IERPTVV0aWwuZmluZEFuY2VzdG9yQnlDbGFzcyhvYmosICJBcnJvd0ljb24iKTsKICBpZihvYmpQYXJlbnQpIHN1Yk1lbnVJdGVtQ29udGFpbmVyID0gRE9NVXRpbC5maW5kTmV4dEVsZW1lbnRCeVRhZ05hbWUob2JqUGFyZW50LCAiZGl2Iik7ICAKCWlmKHN1Yk1lbnVJdGVtQ29udGFpbmVyICYmIHN1Yk1lbnVJdGVtQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgIT0gImJsb2NrIikgeyAgICAgIAoJCXN1Yk1lbnVJdGVtQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwoJCW9ialBhcmVudC5jbGFzc05hbWUgPSAnJzsgICAKCQlzdWJNZW51SXRlbUNvbnRhaW5lci5vbm1vdXNlb3ZlciA9IGZ1bmN0aW9uKCkgewkKCQkgIG9ialBhcmVudC5jbGFzc05hbWUgPSAnJzsJCgkJCWlmKG9ialBhcmVudC5UaW1lb3V0KSBjbGVhclRpbWVvdXQob2JqUGFyZW50LlRpbWVvdXQpOwoJCQlvYmpQYXJlbnQuVGltZW91dCA9ICBudWxsOyAgICAgIAoJCX0KCgkJc3ViTWVudUl0ZW1Db250YWluZXIub25tb3VzZW91dCA9IGZ1bmN0aW9uKCkgICAKCQl7ICAgICAgCgkJCW9ialBhcmVudC5UaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHsgICAgICAgICAgICAgICAgCgkJCQkgCiAgICAgICAgdmFyIHN1Ym9iaiA9IERPTVV0aWwuZmluZEZpcnN0RGVzY2VuZGFudEJ5Q2xhc3Moc3ViTWVudUl0ZW1Db250YWluZXIsICJkaXYiLCAiRUNNTWVudUl0ZW1Db250YWluZXIiKTsKCQkJCWlmKHN1Ym9iaikKICAgICAgICB7CQkJCQkJCQkJCQkKCQkJCQkJaWYoc3Vib2JqLnN0eWxlLmRpc3BsYXk9PSdibG9jaycpCgkJCQkJCXsJCgogICAJCQkJCQlzdWJvYmouc3R5bGUuZGlzcGxheSA9ICdub25lJzsgCQkJCQkJCQkJCgkJCQkJCQlzdWJvYmoub25tb3VzZW92ZXIgPSBudWxsOwoJCQkJCQkJc3Vib2JqLm9ubW91c2VvdXQgPSBudWxsOwkJCQkJCQkgCgkJCQkJCX0KCQkJCQkJZWxzZQoJCQkJCQl7CgoJCQkJCQkJc3ViTWVudUl0ZW1Db250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgCgkJCQkJCQlvYmpQYXJlbnQuY2xhc3NOYW1lID0gJ0Fycm93SWNvbic7CQkJCQoJCQkJCQkJc3ViTWVudUl0ZW1Db250YWluZXIub25tb3VzZW92ZXIgPSBudWxsOwoJCQkJCQkJc3ViTWVudUl0ZW1Db250YWluZXIub25tb3VzZW91dCA9IG51bGw7CgkJCQkJCX0KCQkJCX0KCQkJCWVsc2UKCQkJCXsJCQoJCQkJCQkKCQkJCQlzdWJNZW51SXRlbUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyAJCQkJCQoJCQkJCW9ialBhcmVudC5jbGFzc05hbWUgPSAnQXJyb3dJY29uJzsJCQkJCgkJCQkJc3ViTWVudUl0ZW1Db250YWluZXIub25tb3VzZW92ZXIgPSBudWxsOwoJCQkJCXN1Yk1lbnVJdGVtQ29udGFpbmVyLm9ubW91c2VvdXQgPSBudWxsOwoJCQkJfQoJCQl9LCAxKjEwKTsgICAgIAoJCX0JCgkJb2JqLm9ubW91c2VvdXQgPSBzdWJNZW51SXRlbUNvbnRhaW5lci5vbm1vdXNlb3V0OwkJCgkJc3ViTWVudUl0ZW1Db250YWluZXIuc3R5bGUubGVmdCA9IG9ialBhcmVudC5vZmZzZXRMZWZ0ICsgb2JqUGFyZW50Lm9mZnNldFdpZHRoICsgJ3B4JzsKCQlzdWJNZW51SXRlbUNvbnRhaW5lci5zdHlsZS50b3AgPSAgZVhvLmNvcmUuQnJvd3Nlci5maW5kUG9zWUluQ29udGFpbmVyKG9ialBhcmVudCxzdWJNZW51SXRlbUNvbnRhaW5lci5vZmZzZXRQYXJlbnQpICsgJ3B4JzsKCX0KfQ==" jcr:encoding="UTF-8" jcr:lastModified="2011-09-23T16:30:22.940+07:00" jcr:mimeType="application/x-javascript"/></default.js></js><css jcr:primaryType="exo:cssFolder" jcr:mixinTypes="exo:owneable exo:datetime mix:votable mix:commentable mix:i18n" exo:dateCreated="2009-08-21T01:08:20.707+07:00" exo:dateModified="2009-08-21T01:08:20.714+07:00" exo:language="en" exo:owner="root" exo:voteTotal="0" exo:voteTotalOfLang="0" exo:votingRate="0.0" jcr:created="2009-08-21T01:08:20.676+07:00"><default.css jcr:primaryType="nt:file" jcr:mixinTypes="exo:owneable exo:cssFile exo:datetime mix:votable mix:commentable exo:modify mix:i18n" jcr:uuid="38feb8f77f0000010074c5cdbcf40338" exo:active="true" exo:dateCreated="2009-08-21T01:08:20.822+07:00" exo:dateModified="2009-08-21T01:08:20.831+07:00" exo:language="en" exo:lastModifiedDate="2011-09-23T16:30:22.971+07:00" exo:lastModifier="john" exo:owner="root" exo:presentationType="exo:cssFile" exo:priority="0" exo:voteTotal="0" exo:voteTotalOfLang="0" exo:votingRate="0.0" jcr:created="2009-08-21T01:08:20.736+07:00"><jcr:content jcr:primaryType="nt:resource" jcr:mixinTypes="exo:owneable exo:datetime mix:votable mix:commentable dc:elementSet mix:i18n" jcr:uuid="38feb96c7f0000010088e0fe71341223" exo:dateCreated="2009-08-21T01:08:20.884+07:00" exo:dateModified="2009-08-21T01:08:20.891+07:00" exo:internalUse="false" exo:language="en" exo:owner="root" exo:voteTotal="0" exo:voteTotalOfLang="0" exo:votingRate="0.0" jcr:data="LkVDTU1lbnVJdGVtQ29udGFpbmVyIHsgICAgCiAgei1pbmRleDoxOyAKfQouRUNNTWVudUl0ZW1Db250YWluZXIgLk1lbnVJdGVtIHsKCWJhY2tncm91bmQ6bm9uZSByZXBlYXQgc2Nyb2xsIDAgMCAjM0U0NDVEOwoJYm9yZGVyLXRvcDoxcHggc29saWQgIzU1NUE2RTsKCWhlaWdodDoyOHB4OwoJbGluZS1oZWlnaHQ6MjhweDsKCW9wYWNpdHk6MC45OwoJd2lkdGg6MTAwJTsKfQouRUNNTWVudUl0ZW1Db250YWluZXIgLlNlbGVjdGVkSXRlbSB7CgliYWNrZ3JvdW5kLWNvbG9yOiNBNEE0QTQ7CgliYWNrZ3JvdW5kOm5vbmUgcmVwZWF0IHNjcm9sbCAwIDAgI0E0QTRBNDsKCWJvcmRlci10b3A6MXB4IHNvbGlkICM1NTVBNkU7CgloZWlnaHQ6MjhweDsKCWxpbmUtaGVpZ2h0OjI4cHg7CglvcGFjaXR5OjAuOTsKCXdpZHRoOjEwMCU7Cn0KLkVDTU1lbnVJdGVtQ29udGFpbmVyIC5NZW51SXRlbSAuQXJyb3dJY29uIHsKCWJhY2tncm91bmQ6dXJsKCIvZVhvV0NNUmVzb3VyY2VzL3NraW4vRGVmYXVsdFNraW4vYmFja2dyb3VuZC9BcnJvd0ljb24uZ2lmIikgbm8tcmVwZWF0IHNjcm9sbCByaWdodCBjZW50ZXIgdHJhbnNwYXJlbnQ7Cn0KLkVDTU1lbnVJdGVtQ29udGFpbmVyIC5NZW51SXRlbSAuSXRlbUljb24gewoJYmFja2dyb3VuZC1wb3NpdGlvbjo2cHggY2VudGVyOwoJY3Vyc29yOnBvaW50ZXI7CglkaXNwbGF5OmJsb2NrOwoJbGluZS1oZWlnaHQ6MTZweDsKCXBhZGRpbmc6NXB4IDMycHggMHB4IDBweDsKCXdoaXRlLXNwYWNlOm5vd3JhcDsKCXdpZHRoOmF1dG87Cn0KLkVDTU1lbnVJdGVtQ29udGFpbmVyIC5NZW51SXRlbSAuRGVmYXVsdFBhZ2VJY29uIHsKCWJhY2tncm91bmQ6dXJsKCIvZVhvV0NNUmVzb3VyY2VzL3NraW4vRGVmYXVsdFNraW4vYmFja2dyb3VuZC9Ub29sYmFyQ29udGFpbmVyLnBuZyIpIG5vLXJlcGVhdCBzY3JvbGwgNXB4IC02MzRweCB0cmFuc3BhcmVudDsKCXBhZGRpbmctbGVmdDozMnB4OwoJaGVpZ2h0OjI0cHg7Cn0KLlVJV0NNTmF2aWdhdGlvblBvcnRsZXQgLlVJTmF2aWdhdGlvbkJhciAuQnV0dG9uIHsKY3Vyc29yOnBvaW50ZXI7CmhlaWdodDoyMXB4OwptYXJnaW4tbGVmdDo2cHg7Cm1hcmdpbi1yaWdodDo2cHg7Cn0=" jcr:encoding="UTF-8" jcr:lastModified="2011-09-23T16:30:22.970+07:00" jcr:mimeType="text/css"/></default.css></css><medias jcr:primaryType="exo:multimediaFolder" jcr:mixinTypes="exo:owneable exo:datetime mix:votable mix:commentable mix:i18n" exo:dateCreated="2009-08-21T01:08:20.985+07:00" exo:dateModified="2009-08-21T01:08:20.993+07:00" exo:language="en" exo:owner="root" exo:voteTotal="0" exo:voteTotalOfLang="0" exo:votingRate="0.0"><images jcr:primaryType="nt:folder" jcr:mixinTypes="exo:owneable exo:datetime mix:votable mix:commentable mix:i18n" exo:dateCreated="2009-08-21T01:08:21.051+07:00" exo:dateModified="2009-08-21T01:08:21.063+07:00" exo:language="en" exo:owner="root" exo:voteTotal="0" exo:voteTotalOfLang="0" exo:votingRate="0.0" jcr:created="2009-08-21T01:08:21.018+07:00"><illustration jcr:primaryType="nt:file" jcr:mixinTypes="exo:owneable exo:datetime mix:referenceable mix:votable mix:commentable exo:modify mix:i18n" jcr:uuid="38feba557f000001004b470c5028be2d" exo:dateCreated="2009-08-21T01:08:21.141+07:00" exo:dateModified="2009-08-21T01:08:21.148+07:00" exo:language="en" exo:lastModifiedDate="2011-09-23T16:30:22.991+07:00" exo:lastModifier="john" exo:owner="root" exo:voteTotal="0" exo:voteTotalOfLang="0" exo:votingRate="0.0" jcr:created="2009-08-21T01:08:21.085+07:00"><jcr:content jcr:primaryType="nt:resource" jcr:mixinTypes="exo:owneable exo:datetime mix:votable mix:commentable dc:elementSet mix:i18n" jcr:uuid="38febab07f00000100ec3e186cf11472" exo:dateCreated="2009-08-21T01:08:21.209+07:00" exo:dateModified="2009-08-21T01:08:21.216+07:00" exo:internalUse="false" exo:language="en" exo:owner="root" exo:voteTotal="0" exo:voteTotalOfLang="0" exo:votingRate="0.0" jcr:data="" jcr:encoding="UTF-8" jcr:lastModified="2011-09-23T16:30:22.990+07:00" jcr:mimeType=""/></illustration><CenterHilineButton.gif jcr:primaryType="nt:file" jcr:mixinTypes="exo:datetime exo:owneable mix:i18n mix:votable mix:commentable mix:referenceable" jcr:uuid="391f212f7f00000100bb1815e7dd229a" exo:dateCreated="2009-08-21T01:43:44.623+07:00" exo:dateModified="2009-08-21T01:43:44.632+07:00" exo:language="en" exo:owner="root" exo:voteTotal="0" exo:voteTotalOfLang="0" exo:votingRate="0.0" jcr:created="2009-08-21T01:43:44.566+07:00"><jcr:content jcr:primaryType="nt:resource" jcr:mixinTypes="exo:datetime exo:owneable dc:elementSet" jcr:uuid="391f21b27f0000010035beaa577f5f28" exo:dateCreated="2009-08-21T01:43:44.724+07:00" exo:dateModified="2009-08-21T01:43:44.732+07:00" exo:internalUse="false" exo:owner="root" jcr:data="R0lGODlhCgAaAJEAAAAAAP///////wAAACH5BAEAAAIALAAAAAAKABoAAAIWjI+py+0Po5y02oubEGvv5HlHGAZkAQA7" jcr:encoding="UTF-8" jcr:lastModified="2009-08-21T01:43:44.559+07:00" jcr:mimeType="image/gif"/></CenterHilineButton.gif><WhiteDownArrow.gif jcr:primaryType="nt:file" jcr:mixinTypes="exo:owneable exo:datetime" exo:dateCreated="2009-08-26T15:32:24.077+07:00" exo:dateModified="2009-08-26T15:32:24.082+07:00" exo:owner="root" jcr:created="2009-08-26T15:32:24.019+07:00"><jcr:content jcr:primaryType="nt:resource" jcr:mixinTypes="exo:owneable exo:datetime dc:elementSet" jcr:uuid="55d596187f00010100136a82e0fe16d6" exo:dateCreated="2009-08-26T15:32:24.120+07:00" exo:dateModified="2009-08-26T15:32:24.127+07:00" exo:internalUse="false" exo:owner="root" jcr:data="R0lGODlhEAAQAMQAAChvm0+kySlwnFWr0Fet0S11oEiZwDuHsUWWvVOpzlKnzECOtzWAqjB4o0qexP///+Hh4gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAABAALAAAAAAQABAAAAUfICSOZGmeaKquLPm8cPyYcozWcyqzcAvlvqBwSDSFAAA7" jcr:lastModified="2009-08-26T15:32:24.162+07:00" jcr:mimeType="image/gif"/></WhiteDownArrow.gif></images><videos jcr:primaryType="nt:folder" jcr:mixinTypes="exo:owneable exo:datetime mix:votable mix:commentable mix:i18n" exo:dateCreated="2009-08-21T01:08:21.310+07:00" exo:dateModified="2009-08-21T01:08:21.317+07:00" exo:language="en" exo:owner="root" exo:voteTotal="0" exo:voteTotalOfLang="0" exo:votingRate="0.0" jcr:created="2009-08-21T01:08:21.279+07:00"/></medias><default.html jcr:primaryType="nt:file" jcr:mixinTypes="exo:owneable exo:datetime exo:htmlFile mix:votable mix:commentable exo:modify mix:i18n" jcr:uuid="38febb5e7f000001002c7f9329bcb8d5" exo:dateCreated="2009-08-21T01:08:21.402+07:00" exo:dateModified="2009-08-21T01:08:21.410+07:00" exo:language="en" exo:lastModifiedDate="2011-09-23T16:30:23.004+07:00" exo:lastModifier="john" exo:owner="root" exo:voteTotal="0" exo:voteTotalOfLang="0" exo:votingRate="0.0" jcr:created="2009-08-21T01:08:21.350+07:00"><jcr:content jcr:primaryType="nt:resource" jcr:mixinTypes="exo:owneable exo:datetime mix:votable mix:commentable dc:elementSet mix:i18n" jcr:uuid="38febbc17f00000100b89aba6316987a" exo:dateCreated="2009-08-21T01:08:21.482+07:00" exo:dateModified="2009-08-21T01:08:21.489+07:00" exo:internalUse="false" exo:language="en" exo:owner="root" exo:voteTotal="0" exo:voteTotalOfLang="0" exo:votingRate="0.0" jcr:data="PGRpdiBpZD0ibmF2aWdhdGlvbi1nZW5lcmF0b3IiPgoJPGRpdiBjbGFzcz0iVUlXQ01OYXZpZ2F0aW9uUG9ydGxldCI+CgkJPGRpdiBjbGFzcz0iVUlOYXZpZ2F0aW9uQmFyIj4KCQkJPGRpdiBjbGFzcz0iQ29udHJvbEJ1dHRvbiBIb3ZlckJ1dHRvbiIgaHJlZj0iYWFhIj4KCQkJCTxkaXYgY2xhc3M9IkJ1dHRvbiI+CgkJCQkJT3ZlcnZpZXc8L2Rpdj4KCQkJPC9kaXY+CgkJCTxkaXYgY2xhc3M9IkNvbnRyb2xCdXR0b24iIGhyZWY9ImFhYSI+CgkJCQk8ZGl2IGNsYXNzPSJCdXR0b24iPgoJCQkJCU5ld3M8L2Rpdj4KCQkJPC9kaXY+CgkJCTxkaXYgY2xhc3M9IkNvbnRyb2xCdXR0b24iIGhyZWY9ImFhYSI+CgkJCQk8ZGl2IGNsYXNzPSJCdXR0b24iPgoJCQkJCUV2ZW50czwvZGl2PgoJCQk8L2Rpdj4KCQkJPGRpdiBjbGFzcz0iQ29udHJvbEJ1dHRvbiIgaHJlZj0iYWFhIj4KCQkJCTxkaXYgY2xhc3M9IkJ1dHRvbiI+CgkJCQkJUHVibGljYXRpb25zPC9kaXY+CgkJCTwvZGl2PgoJCQk8ZGl2IHN0eWxlPSJjbGVhcjogbGVmdDsiPgoJCQkJJm5ic3A7PC9kaXY+CgkJPC9kaXY+Cgk8L2Rpdj4KPC9kaXY+CjxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij4vKiA8IVtDREFUQVsgKi8gcmVuZGVyTmF2aWdhdGlvbnMoKTsgLyogXV0+ICovPC9zY3JpcHQ+" jcr:encoding="UTF-8" jcr:lastModified="2011-09-23T16:30:23.003+07:00" jcr:mimeType="text/html"/></default.html><documents jcr:primaryType="nt:unstructured" jcr:mixinTypes="exo:owneable exo:datetime exo:documentFolder mix:votable mix:commentable mix:i18n" exo:dateCreated="2009-08-21T01:08:21.611+07:00" exo:dateModified="2009-08-21T01:08:21.617+07:00" exo:language="en" exo:owner="root" exo:voteTotal="0" exo:voteTotalOfLang="0" exo:votingRate="0.0"/></Navigation>
\ No newline at end of file
Index: core/services/src/main/java/org/exoplatform/services/wcm/navigation/NavigationService.java
===================================================================
--- core/services/src/main/java/org/exoplatform/services/wcm/navigation/NavigationService.java	(revision 73912)
+++ core/services/src/main/java/org/exoplatform/services/wcm/navigation/NavigationService.java	(working copy)
@@ -23,6 +23,7 @@
 import org.exoplatform.portal.config.model.PageNavigation;
 import org.exoplatform.portal.config.model.PageNode;
 import org.exoplatform.portal.mop.Visibility;
+import org.exoplatform.portal.webui.util.Util;
 
 /**
  * Created by The eXo Platform SAS
@@ -70,12 +71,18 @@
 		  if (isVisibleNode(node)) {
 			  if (!first) js.append(",");
 			  first=false;
+			  
+			  String link = "#";
+			  if (node.getPageReference() != null) {
+				  link = Util.getPortalRequestContext().getPortalURI() + node.getUri();
+			  } 
 			  js.append("{");
 			  js.append("\"icon\":"+(node.getIcon()!=null?"\""+node.getIcon()+"\"":"null")+",");
 			  js.append("\"label\":\""+node.getLabel()+"\",");
 			  js.append("\"name\":\""+node.getName()+"\",");
 			  js.append("\"resolvedLabel\":\""+node.getResolvedLabel()+"\",");
 			  js.append("\"uri\":\""+node.getUri()+"\",");
+			  js.append("\"link\":\"" + link + "\",");
 			  js.append("\"nodes\":"+addJsonNodes(node.getNodes()));
 			  js.append("}");
 		  }
